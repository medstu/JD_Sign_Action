name: JD_Sign_Action

on:
  repository_dispatch:
  release:
    types: published
  # push:
  #   branches:
  #     - master
  schedule:
    - cron: 0 20 * * *
  watch:
    types: started
    
env:
  JD_COOKIE: ${{ shshshfpa=4dfa9527-7be1-3baa-0b0f-82a4f019eabc-1597925443; shshshfpb=i3EBvlDR%2FCGvf7wvHVcIRlA%3D%3D; __jdv=122270672|baidu|-|organic|not set|1608296716662; ipLoc-djd=15-1213-3411-0; areaId=15; jcap_dvzw_fp=becf25bae88994c6ccb0613176f95807$936342108847; regionAddress=15%2C1213%2C3411%2C50027; commonAddress=-1762710325; warehistory="897731,28916294056,72290638990,10025023499971,10021475006550,"; PCSYCityID=CN_330000_330100_330106; TrackID=1trtC0gE2SBlI1ZSFqmkqMP1sDLGRsyFppRV-slB4T1FF9XjONiftlBadCuL5zdCh0b2eeMsBWOktn1kQ4jSBMMkfC1KA2mW0zQjBu0l93t8; thor=810F158F22A41E9A39050A36513719F37AA4E9492A727BBF7EB731F0C6357C4EEBF4DE296DC11A74264D9E178FF4A0380C119978C5168D4244B22DF11FBC8186767D2F4D4262BBB85771856CF181056A3FD1611852753E9D28AE487A6C745A221262953F3B41D9397BAD114E1C739F8203610AF41F205E06BBFE447E06EC9FEEDE85B3A635BFC85BACFEC405493979A45F3FB06CA1D1366489D4962F2C68569A; pinId=1iLwI4-IpSXgnVqR_PzfxA; pin=jd_NScYaigehZdH; unick=%E6%99%BA%E9%97%AD%E7%97%87%E5%84%BF%E7%AB%A5; ceshi3.com=201; _tp=k%2FctghXqFhHXVGoxaqgC7g%3D%3D; _pst=jd_NScYaigehZdH; __jda=76161171.159792544151510810837.1597925441.1608296717.1608370199.17; __jdc=76161171; __jdu=159792544151510810837; mba_muid=159792544151510810837; shshshfp=f9f2be916fb2e5bb6f46f7a45dfaceae; 3AB9D23F7A4B3C9B=KJI3ZEGYOJG5NTFVJWEJ4MB7YLQ4KA26KB7QSQQ7WX64TCNAXLRI3H4HKSMHTRM5PNQ7KC7K7WDIDL65FB3NE4OSGA; shshshsID=83a3e745ab07bcb7d95bee3fc139a06b_7_1608370947537; TrackerID=lrpt2o15EF48B4wWrLOitCi_vKrwwYnRLG9VAmx-HhOwbKJBEYsqLnfPYshBazNNI6eHScL_mEBl5WMBMrCCcz9Lfgv3ocjW7mw26V6eU-w; pt_key=AAJf3csKADDwaR30eiucWLkR1VOxBNuAvK6hsuz7hzizGAhATE1lVLNJk_Sr_UvWh0EWjt-St9s; pt_pin=jd_NScYaigehZdH; pt_token=w69t0bsb; pwdt_id=jd_NScYaigehZdH; sfstoken=tk01me5601deda8sM3gzKzJ4MyszmO1qvG+5PotsX3I3fzgXmrEGQ2nLXmfc7y5o6ycmzhftYakrUviDIwwvJora+fH/; mobilev=html5; __jdb=76161171.13.159792544151510810837|17.1608370199; mba_sid=16083709349306272923709913791.5; __jd_ref_cls=Mnpm_ComponentApplied; }}
  JD_DUAL_COOKIE: ${{ secrets.JD_DUAL_COOKIE }}
  PUSH_KEY: ${{ SCU137085Te2debdf001f24fb778b5815651f857c15fddcba668300 }}
  UPLOAD_BESULT_DIR: true

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout codes
              uses: actions/checkout@v2
              
            - name: Use Node.js
              uses: actions/setup-node@v1
              with:
                node-version: '12.x'
                
            - name: Run install
              run: npm install
              
            - name: Run Script
              run: node jd_sign.js
                
            - name: Upload result file
              uses: actions/upload-artifact@master
              if: env.UPLOAD_BESULT_DIR == 'true'
              with:
                name: result
                path: ./*.txt


